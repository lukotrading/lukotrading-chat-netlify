<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lukotrading – Productassistent</title>
</head>
<body style="margin:0;padding:20px;font-family:Arial,sans-serif;background:#f7f8fb;">
  <h2 style="text-align:center;color:#004aad;margin:0 0 12px;">Vraag het aan de Expert</h2>

  <div id="chat" style="max-width:520px;height:680px;border:2px solid #004aad;border-radius:12px;margin:0 auto;background:#fff;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 0 12px rgba(0,0,0,.1)">
    <div style="background:#004aad;color:#fff;padding:12px 14px;font-weight:700">Lukotrading – Innolab Assistent</div>
    <div id="chat-window" style="flex:1;padding:12px;overflow:auto;background:#f9f9f9"></div>
    <div style="display:flex;border-top:1px solid #ddd">
      <input id="chat-input" placeholder="Stel je vraag over Innolab…" style="flex:1;padding:12px;border:0;outline:0;font-size:15px">
      <button id="chat-send" style="background:#004aad;color:#fff;border:0;padding:0 18px;cursor:pointer;font-size:14px">Stuur</button>
    </div>
  </div>

  <script>
    // VERVANG <YOUR_SITE> nadat je in Netlify je site-URL hebt (stap 4–6)
    const BACKEND = "https://<YOUR_SITE>.netlify.app/.netlify/functions/chat";

    const win = document.getElementById("chat-window");
    const input = document.getElementById("chat-input");
    const send = document.getElementById("chat-send");

    function msg(who, text, err){ const d=document.createElement("div");
      d.style.margin="8px 0"; d.style.whiteSpace="pre-wrap"; if(err) d.style.color="#b00020";
      d.innerHTML = "<strong>"+who+":</strong> " + text; win.appendChild(d); win.scrollTop=win.scrollHeight; }

    async function run(){
      const q = input.value.trim(); if(!q) return; msg("U", q); input.value="";
      try{
        const r = await fetch(BACKEND, {method:"POST", headers:{"Content-Type":"application/json"},
          body: JSON.stringify({messages:[{role:"user", content:q}]})});
        const t = await r.text();
        if(!r.ok) return msg("Lukotrading", "Fout ("+r.status+"): "+t, true);
        msg("Lukotrading", t||"(leeg antwoord)");
      }catch(e){ msg("Lukotrading", "Netwerkfout: "+(e?.message||e), true); }
    }
    send.onclick = run; input.addEventListener("keypress", e=>{ if(e.key==="Enter") run(); });
    msg("Lukotrading", "Welkom! Stel je vraag over Innolab-producten (bv. kalk in douche, mos/algen, airco reinigen).");
  </script>
</body>
</html>


